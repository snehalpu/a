"use strict";var PS_POLL_USER_POLLS=[],PS_POLL_CONTAINER=null,PS_TEMP_POLL_CONTAINER=null,PS_POLL_OPTIONS_DELIMITER=";",PS_POLL_SELECTED_POLL_INDEX=null,PS_POLL_TEMP_RESPONSES=[],PS_POLL_POPUP_ISOPEN=!1,PS_POLL_CSS='<style type="text/css">.ps-question-area-spacer{width: 100%;height: 145px;}.ps-poll-sc {    overflow-y: auto;    height: 100px;}.ps-poll-bd {    border-bottom: 1px solid #ccc;    margin-top: 7px;}.ps-owl-prev, .ps-owl-next {    background: none repeat scroll 0 0 #15389B;    border: 1px solid #15389B;    border-radius: 3px;    color: #fff;    display: inline-block;    font-size: 11px;    height: 9px;    margin: 10px 2px 4px 2px;    padding: 11px 4px;    line-height: 0px;    cursor: pointer;}.ps-poll-submit-message {    font-size: 24px;    color: green;    text-align: center;    font-weight: 600;    vertical-align: middle;    padding: 50px;}.ps-poll-loading-message {    width: 100%;    height: 100%;    opacity: 0.3;    position: absolute;    z-index: 1000;    top: 0;    left: 0;    text-align: center;    font-weight: 600;    padding-top: 100px;    font-size: large;    cursor: wait;}.ps-no-question-message {    text-align: center;    padding-top: 50px;    font-weight: bold;}.ps-question-text {    margin-bottom: 1em;    font-size: 14px;    font-weight: 600;    opacity: 0.8;}.ps-question-help {    display: block;    font-size: xx-small;    font-weight: 200;    font-stretch: ultra-condensed;    opacity: 0.8;    cursor: help;}.ps-answer-content label {    font-size: 14px !important;    display: inline-block;}.ps-answer-content .br-current-rating {    display: inline-block !important;    font-size: 14px !important;    text-align: left !important;    padding-left: 20px !important;    width:200px !important;}.ps-save-btn {    width: 60px;}.ps-poll-radio,.ps-poll-checkbox {    margin-right: 5px;    font-size: 12px !important;}.ps-poll-textbox,.ps-poll-select,.ps-poll-alternate-text {    color: #333333 !important;    height: 28px !important;    padding-left: 5px !important;    border: 1px solid #999999 !important;    border-radius: 4px !important;    width: 70% !important;    font-size: 12px !important;}.ps-poll-textarea {    color: #333333 !important;    height: 50px !important;    padding-left: 5px !important;    border: 1px solid #999999 !important;    border-radius: 4px !important;    width: 70% !important;    resize: none;    font-size: 12px !important;}.ps-poll-alternate { margin-top:1em; }.ps-poll-popup-only{display:none !important;}#PS_POLL_POPUP{    min-height: 165px;    height: auto !important;}#PS_POLL_POPUP .ps-question-area-spacer{    min-height: 145px;    height: auto !important;}#PS_POLL_POPUP .ps-poll-tab-only{display:none !important;}#PS_POLL_POPUP .ps-poll-popup-only{display:block !important;}#PS_POLL_POPUP .ps-owl-buttons{float:left;}#PS_POLL_POPUP.ui-dialog-content { position:static; }#PS_POLL_POPUP .ps-poll-sc {    min-height: 120px;    height: auto !important;}</style>',PS_POLL_HTML='<div class="ps-question-area-spacer">    <div class="ps-question-area" style="display: none;">        <div class="ps-poll-sc">            <div class="ps-question-text"></div>            <div class="ps-answer-area"><div class="ps-answer-content"></div></div>        </div>        <div class="ps-poll-bd ps-poll-popup-only"></div>        <div class="ps-owl-buttons">            <button type="button" class="ps-nav ps-left-button ps-owl-prev" onclick="ps_DoNav(\'L\');">&#8592;</button>            <button type="button" class="ps-save-btn aspButton">Finish</button>            <button type="button" class="ps-nav ps-right-button ps-owl-next" onclick="ps_DoNav(\'R\');">&#8594;</button>        </div>        <button style="float:right;top:10px;" type="button" class="ps-poll-popup-only ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" onclick="ps_SavePoll(true);"><span class="ui-button-text">Cancel</span></button>        <div class="ps-poll-bd ps-poll-tab-only"></div>    </div>    <div class="ps-no-question-message" style="display: none;">No polls to attempt.</div>    <div class="ps-poll-submit-message" style="display: none;">Saved successfully.</div>    <div class="ps-poll-loading-message" style="display: none;">Please wait...</div></div>',PS_POLL_POPUP_HTML='<div id="PS_POP_CONTAINER"><div id="PS_POLL_POPUP" title="Poll of the day." style="display: none;"></div></div>';function ps_SetupPollsContainer(e){PS_TEMP_POLL_CONTAINER=e,ps_GetPolls()}function ps_GetPolls(){$.ajax({type:"POST",url:"WSUserPoll.asmx/GetUserPolls",contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){if(void 0==e.d||(e=e.d),!0!==e.status||void 0===e.data||null===e.data)console.error(e.message),PS_POLL_USER_POLLS=[];else{var t=JSON.parse(e.data);PS_POLL_USER_POLLS=t.length<1?[]:t}ps_CheckPopupPoll()},error:function(e){console.error(e.status+" "+e.statusText)}})}function ps_CheckPopupPoll(){$.map(PS_POLL_USER_POLLS,function(e,t){if(!0===e.ShowPopup)return t}).length>0?(PS_POLL_POPUP_ISOPEN=!0,$($("form")[0]).append($(PS_POLL_POPUP_HTML)),PS_POLL_CONTAINER=$("#PS_POLL_POPUP"),ps_SetPollControls(),$("#PS_POLL_POPUP").dialog({width:697,resizable:!1,modal:!0,closeOnEscape:!1,dialogClass:"no-close",draggable:!1,appendTo:"#PS_POP_CONTAINER",position:"center"}),ps_ShowPoll()):ps_SetPollTab()}function ps_SetPollTab(){1===(PS_TEMP_POLL_CONTAINER=$(PS_TEMP_POLL_CONTAINER)).length?($.each(PS_POLL_USER_POLLS,function(e,t){!0===t.MultipleAttemptAllowed&&(t.PollAttempted=!1)}),PS_POLL_POPUP_ISOPEN=!1,PS_POLL_CONTAINER=PS_TEMP_POLL_CONTAINER,PS_POLL_OPTIONS_DELIMITER=";",PS_POLL_SELECTED_POLL_INDEX=null,PS_POLL_TEMP_RESPONSES=[],ps_SetPollControls(),ps_ShowPoll()):(PS_POLL_USER_POLLS=[],PS_POLL_CONTAINER=null,PS_TEMP_POLL_CONTAINER=null,PS_POLL_OPTIONS_DELIMITER=";",PS_POLL_SELECTED_POLL_INDEX=null,PS_POLL_TEMP_RESPONSES=[],PS_POLL_POPUP_ISOPEN=!1)}function ps_SetPollControls(){PS_POLL_CONTAINER.closest("body").prepend($(PS_POLL_CSS)),PS_POLL_CONTAINER.html($(PS_POLL_HTML))}function ps_ShowPoll(e){PS_POLL_CONTAINER.find(".ps-question-area").hide(),PS_POLL_CONTAINER.find(".ps-no-question-message").hide();var t=$.map(PS_POLL_USER_POLLS,function(e,t){if(!0!==e.PollAttempted&&(!0!==PS_POLL_POPUP_ISOPEN||!0===e.ShowPopup))return t});if(t.length>0){PS_POLL_SELECTED_POLL_INDEX=e=void 0===e||null===e||!1!==isNaN(parseInt(e))?t[0]:parseInt(e);var l=PS_POLL_USER_POLLS[e];PS_POLL_CONTAINER.find(".ps-question-area").attr("data-qtype",l.QuestionType).attr("data-qid",l.id).attr("data-qgroup",isNaN(parseInt(l.QuestionGroup))?null:parseInt(l.QuestionGroup)).attr("data-mallowed",!0===l.MultipleAttemptAllowed);var s=PS_POLL_CONTAINER.find(".ps-question-text");s.html(l.QuestionDescription),void 0!==l.Helptext&&null!==l.Helptext&&String(l.Helptext).trim().length>0&&s.append('<span class="ps-question-help">'+l.Helptext+"</span>"),PS_POLL_CONTAINER.find(".ps-answer-content").html(ps_GetAnswerControlHtml(l.QuestionType,l.Options,l.id,l.AcceptAlternateResponse)),isNaN(parseInt(l.QuestionGroup))?PS_POLL_CONTAINER.find(".ps-save-btn").attr("onclick","ps_SavePoll();").text("Save"):void 0===PS_POLL_USER_POLLS[e+1]||null===PS_POLL_USER_POLLS[e+1]||l.QuestionGroup!==PS_POLL_USER_POLLS[e+1].QuestionGroup?PS_POLL_CONTAINER.find(".ps-save-btn").attr("onclick","ps_SavePoll();").text("Finish"):PS_POLL_CONTAINER.find(".ps-save-btn").attr("onclick","ps_TempSavePoll();").text("Next"),PS_POLL_CONTAINER.find(".ps-question-area").show()}else!0===PS_POLL_POPUP_ISOPEN?(PS_POLL_CONTAINER.dialog("close"),ps_SetPollTab()):PS_POLL_CONTAINER.find(".ps-no-question-message").show()}function ps_GetAnswerControlHtml(e,t,l,s){var n="";t=void 0===t||null===t||""===String(t).trim()?[]:String(t).trim().split(PS_POLL_OPTIONS_DELIMITER),s=void 0===s||null===s||""===String(s).trim()?[]:String(s).trim().split(PS_POLL_OPTIONS_DELIMITER);var a=PS_POLL_CONTAINER.prop("id");switch(e){case"RB":$.each(t,function(e,t){n+='<label><input type="radio" class="ps-poll-radio" name="rdPolls'+l+'" value="'+t+'"/>'+t+"</label>"}),s.length>0&&(n+='<div class="ps-poll-alternate" style="display:none;"><label class="ps-poll-alternate-label">'+(null!=s[1]?s[1]:"Others")+'</label><input type="text" class="ps-poll-alternate-text" name="alTbPolls'+l+'" maxlength="250" placeholder="Type here.."/></div>',n+='<script type="text/javascript">$("'+(null!=a?"#"+a+" ":"")+"input[name=rdPolls"+l+']").on("change", function (e) {                    var con = $("'+(null!=a?"#"+a+" ":"")+'.ps-poll-alternate");                    if ($(this).val() == "'+s[0]+'") {                        con.show();                    } else {                        con.hide();                        con.find(".ps-poll-alternate-text").val("");                    }                });<\/script>');break;case"CB":$.each(t,function(e,t){n+='<label><input type="checkbox" class="ps-poll-checkbox" name="cbPolls'+l+'" value="'+t+'"/>'+t+"</label><br/>"}),s.length>0&&(n+='<div class="ps-poll-alternate" style="display:none;"><label class="ps-poll-alternate-label">'+(null!=s[1]?s[1]:"Others")+'</label><input type="text" class="ps-poll-alternate-text" name="alTbPolls'+l+'" maxlength="250" placeholder="Type here.."/></div>',n+='<script type="text/javascript">$("'+(null!=a?"#"+a+" ":"")+"input[name=cbPolls"+l+']").on("change", function (e) {                    var con = $("'+(null!=a?"#"+a+" ":"")+'.ps-poll-alternate");                    var alternateChecked = false;                    $(this).closest(".ps-answer-content").find("input[type=checkbox][name^=cbPolls]:checked").map(function () { alternateChecked = "'+s[0]+'" === this.value || alternateChecked === true ? true : false; return this.value; });                    if (alternateChecked == true) {                        con.show();                    } else {                        con.hide();                        con.find(".ps-poll-alternate-text").val("");                    }                });<\/script>');break;case"DD":n+='<select class="ps-poll-select" name="ddPolls'+l+'">',$.each(t,function(e,t){n+='<option value="'+t+'">'+t+"</option>"}),n+="</select>",s.length>0&&(n+='<div class="ps-poll-alternate" style="display:none;"><label class="ps-poll-alternate-label">'+(null!=s[1]?s[1]:"Others")+'</label><input type="text" class="ps-poll-alternate-text" name="alTbPolls'+l+'" maxlength="250" placeholder="Type here.."/></div>',n+='<script type="text/javascript">$("'+(null!=a?"#"+a+" ":"")+"select[name=ddPolls"+l+']").on("change", function (e) {                    var con = $("'+(null!=a?"#"+a+" ":"")+'.ps-poll-alternate");                    if ($(this).val() == "'+s[0]+'") {                        con.show();                    } else {                        con.hide();                        con.find(".ps-poll-alternate-text").val("");                    }                });<\/script>');break;case"TA":n+='<textarea class="ps-poll-textarea" maxlength="250" name="taPolls'+l+'" placeholder="Type here.."></textarea>';break;case"TB":n+='<input type="text" class="ps-poll-textbox" maxlength="100" name="tbPolls'+l+'" placeholder="Type here.."/>';break;case"SR":var o=isNaN(parseFloat(t[0]))?5:Math.ceil(parseFloat(t[0]));n+='<div name="srPolls'+l+'"></div>',n+='<script type="text/javascript">$("'+(null!=a?"#"+a+" ":"")+"div[name=srPolls"+l+']").rateYo({                    numStars: '+o+",                    maxValue: "+o+",                    multiColor: true,                    halfStar: true                });<\/script>",s.length>0&&(n+='<div class="ps-poll-alternate" style="display:none;"><label class="ps-poll-alternate-label">'+(null!=s[1]?s[1]:"Others")+'</label><input type="text" class="ps-poll-alternate-text" name="alTbPolls'+l+'" maxlength="250" placeholder="Type here.."/></div>',n+='<script type="text/javascript">$("'+(null!=a?"#"+a+" ":"")+"div[name=srPolls"+l+']").rateYo().on("rateyo.set", function (e,data) {                    var con = $("'+(null!=a?"#"+a+" ":"")+'.ps-poll-alternate");                    if (parseFloat(data.rating) <= '+parseFloat(s[0])+') {                        con.show();                    } else {                        con.hide();                        con.find(".ps-poll-alternate-text").val("");                    }                });<\/script>');break;case"SL":var p=isNaN(parseInt(t[0]))?5:Math.ceil(parseFloat(t[0]));n+='<select name="slPolls'+l+'">';for(var P=1;P<=p;P++)n+='<option value="'+P+'" data-html="'+P+'">'+(void 0!==t[P]&&null!==t[P]&&""!==String(t[P]).trim()?String(t[P]):P)+"</option>";n+="</select>",n+='<script type="text/javascript">$("'+(null!=a?"#"+a+" ":"")+"select[name=slPolls"+l+']").barrating("show", {                    theme: "bars-square",                    showValues: true,                    showSelectedRating: '+(t.length>1?"true":"false")+",                    useOptionTextForShowSelectedRating: "+(t.length>1?"true":"false")+"                });<\/script>",s.length>0&&(n+='<br/><div class="ps-poll-alternate" style="display:none;"><label class="ps-poll-alternate-label">'+(null!=s[1]?s[1]:"Others")+'</label><input type="text" class="ps-poll-alternate-text" name="alTbPolls'+l+'" maxlength="250" placeholder="Type here.."/></div>',n+='<script type="text/javascript">$("'+(null!=a?"#"+a+" ":"")+"select[name=slPolls"+l+']").on("change", function (e) {                    var con = $("'+(null!=a?"#"+a+" ":"")+'.ps-poll-alternate");                    if (parseFloat($(this).val()) <= '+parseFloat(s[0])+') {                        con.show();                    } else {                        con.hide();                        con.find(".ps-poll-alternate-text").val("");                    }                });<\/script>')}return $(n)}function ps_TempSavePoll(){var e=ps_GetCurrentResponseObject();null!=e&&(PS_POLL_TEMP_RESPONSES.push(e),ps_ShowPoll(PS_POLL_SELECTED_POLL_INDEX+1))}function ps_SavePoll(e){var t=ps_GetCurrentResponseObject(e);if(null!=t){if(!0===e&&!0===PS_POLL_POPUP_ISOPEN)if(null==PS_POLL_USER_POLLS[PS_POLL_SELECTED_POLL_INDEX].QuestionGroup)t.Response=null,t.Active=!1,PS_POLL_TEMP_RESPONSES.push(t);else{for(var l,s,n=1,a=PS_POLL_SELECTED_POLL_INDEX;n>0;)l=a-1<0?PS_POLL_USER_POLLS.length-1:a-1,PS_POLL_USER_POLLS[l].QuestionGroup===PS_POLL_USER_POLLS[a].QuestionGroup&&null!=PS_POLL_USER_POLLS[a].QuestionGroup&&0!==a||n--,a=0===n?a:l;for(n=1,PS_POLL_SELECTED_POLL_INDEX=a,PS_POLL_TEMP_RESPONSES=[];n>0;){s=a+1>PS_POLL_USER_POLLS.length-1?0:a+1,PS_POLL_USER_POLLS[s].QuestionGroup===PS_POLL_USER_POLLS[a].QuestionGroup&&null!=PS_POLL_USER_POLLS[a].QuestionGroup&&0!==s||n--;var o=ps_GetCurrentResponseObject(e);o.Response=null,o.Active=!1,PS_POLL_TEMP_RESPONSES.push(o),PS_POLL_SELECTED_POLL_INDEX=a=0===n?a:s}}else PS_POLL_TEMP_RESPONSES.push(t);PS_POLL_CONTAINER.find(".ps-poll-loading-message").show(),$.ajax({type:"POST",url:"WSUserPoll.asmx/SaveUserPollResponse",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({PollResponses:PS_POLL_TEMP_RESPONSES}),success:function(t){if(PS_POLL_CONTAINER.find(".ps-poll-loading-message").hide(),void 0==t.d||(t=t.d),!0!==t.status)console.error(t.message);else if(!0!==e){var l=$.map(PS_POLL_TEMP_RESPONSES,function(e,t){if(!0!==e.MultipleAttemptAllowed||!0===PS_POLL_POPUP_ISOPEN)return parseInt(e.Id)});(l.length>0||!0===PS_POLL_POPUP_ISOPEN)&&$.each(PS_POLL_USER_POLLS,function(e,t){$.inArray(parseInt(t.id),l)>=0&&(t.PollAttempted=!0)}),PS_POLL_TEMP_RESPONSES=[],PS_POLL_CONTAINER.find(".ps-nav").prop("disabled",!0),PS_POLL_CONTAINER.find(".ps-question-area").hide(),PS_POLL_CONTAINER.find(".ps-poll-submit-message").show().fadeOut(3e3,function(){ps_DoNav("R"),PS_POLL_CONTAINER.find(".ps-nav").prop("disabled",!1)})}},error:function(e){PS_POLL_CONTAINER.find(".ps-poll-loading-message").hide(),console.error(e.status+" "+e.statusText)},complete:function(t){!0===e&&!0===PS_POLL_POPUP_ISOPEN&&(PS_POLL_CONTAINER.dialog("close"),ps_SetPollTab())}})}}function ps_GetCurrentResponseObject(e){var t=PS_POLL_CONTAINER.find(".ps-question-area"),l=PS_POLL_USER_POLLS[PS_POLL_SELECTED_POLL_INDEX].QuestionType,s=PS_POLL_USER_POLLS[PS_POLL_SELECTED_POLL_INDEX].id,n=PS_POLL_USER_POLLS[PS_POLL_SELECTED_POLL_INDEX].QuestionGroup;n=isNaN(parseInt(n))?null:parseInt(n);var a=PS_POLL_USER_POLLS[PS_POLL_SELECTED_POLL_INDEX].MultipleAttemptAllowed,o=PS_POLL_USER_POLLS[PS_POLL_SELECTED_POLL_INDEX].AcceptAlternateResponse;o=void 0===o||null===o||""===String(o).trim()?[]:String(o).trim().split(PS_POLL_OPTIONS_DELIMITER);var p=null,P=null;if(!0!==e)switch(o.length>0&&(P=t.find("input[name=alTbPolls"+s+"]").val().trim()),l){case"RB":p=t.find("input[type=radio][name=rdPolls"+s+"]:checked").val(),o.length>0&&p==o[0]&&""==P&&(p=null);break;case"CB":var i=!1;p=t.find("input[type=checkbox][name=cbPolls"+s+"]:checked").map(function(){return i=o[0]===this.value||!0===i,this.value}).get().join(";"),o.length>0&&i&&""==P&&(p=null);break;case"DD":p=t.find("select[name=ddPolls"+s+"]").val(),o.length>0&&p==o[0]&&""==P&&(p=null);break;case"TA":p=t.find("textarea[name=taPolls"+s+"]").val().trim();break;case"TB":p=t.find("input[type=text][name=tbPolls"+s+"]").val().trim();break;case"SR":p=t.find("div[name=srPolls"+s+"]").rateYo("rating"),o.length>0&&parseFloat(p)<=parseFloat(o[0])&&""==P&&(p=null);break;case"SL":p=t.find("select[name=slPolls"+s+"]").val(),o.length>0&&parseFloat(p)<=parseFloat(o[0])&&""==P&&(p=null)}return void 0!==p&&null!==p&&""!==String(p).trim()||!0===PS_POLL_POPUP_ISOPEN&&!0===e?new ps_SaveObjectClass(s,n,l,a,!0===e?null:p,P):null}function ps_DoNav(e){if(null!==PS_POLL_SELECTED_POLL_INDEX&&PS_POLL_USER_POLLS.length>1){PS_POLL_TEMP_RESPONSES=[];var t=2*PS_POLL_USER_POLLS.length;if("L"===e){for(var l,s=2,n=PS_POLL_SELECTED_POLL_INDEX;s>0&&(l=n-1<0?PS_POLL_USER_POLLS.length-1:n-1,PS_POLL_USER_POLLS[l].QuestionGroup===PS_POLL_USER_POLLS[n].QuestionGroup&&null!=PS_POLL_USER_POLLS[n].QuestionGroup||!0===PS_POLL_USER_POLLS[n].PollAttempted||!0===PS_POLL_POPUP_ISOPEN&&!0!==PS_POLL_USER_POLLS[n].ShowPopup||s--,n=0===s?n:l,!(--t<0)););ps_ShowPoll(t<0?null:n)}else{var a;for(s=1,n=PS_POLL_SELECTED_POLL_INDEX;s>0&&(a=n+1>PS_POLL_USER_POLLS.length-1?0:n+1,PS_POLL_USER_POLLS[a].QuestionGroup===PS_POLL_USER_POLLS[n].QuestionGroup&&null!=PS_POLL_USER_POLLS[n].QuestionGroup||!0===PS_POLL_USER_POLLS[a].PollAttempted||!0===PS_POLL_POPUP_ISOPEN&&!0!==PS_POLL_USER_POLLS[a].ShowPopup||s--,n=0===s?n:a,!(--t<0)););ps_ShowPoll(t<0?null:a)}}else ps_ShowPoll()}function ps_SaveObjectClass(e,t,l,s,n,a){this.Id=e,this.QuestionGroup=t,this.QuestionType=l,this.MultipleAttemptAllowed=s,this.Response=n,this.Active=!0,this.AlternateResponse=a}